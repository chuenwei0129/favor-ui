---
title: 其他
order: 999
toc: content
group:
  title: 基础知识
---

## 网络设备与通信模式

- **主机**：在计算机网络中，任何能够连接到网络并与其他设备通信的设备，如智能手机、平板电脑、智能电视、游戏机和汽车等。随着 5G 技术的普及，更多的设备将被接入网络。

- **网卡**：**网卡负责将计算机内存中的二进制数据包转换为电信号**，以便通过网线传输。这一过程由网卡驱动程序控制，包括将数据包复制到网卡缓存区、添加必要的报头和校验序列，最后发送出去。

- **交换机**：交换机通常是 2 个网口以上。连接网络内的设备，根据 MAC 地址转发数据帧。**现代家用路由器通常集成了交换机的功能**，简化了网络设备的配置和使用。

- **路由器**：连接不同网络，根据目的地地址转发数据包。

- **半双工模式**：在这种通信模式下，连接至集线器的设备一次只能发送数据包。直到这个数据包发送完毕，其他设备才能开始发送，这就是所谓的半双工模式。

- **全双工模式**：与半双工不同，全双工模式允许连接至交换机的设备同时发送和接收数据，实现双向通信而互不干扰。

## 网络协议与数据传输

- **TCP/IP 协议簇**：一个包括 TCP 和 IP 在内的广泛的网络协议集合，还包括 ICMP、ARP、UDP、DNS、SMTP 等多种协议，共同构成了互联网的基础。

- **分组**：数据在网络上传输时，会被切割成小块，并加上标识信息形成 “分组”。这些分组沿网络传送至目的地后，再被重新组装成原始数据。
  - **报文**：应用层的数据单位。
  - **报文段**：运输层的数据单位。
  - **数据报**：网络层的数据单位。
  - **帧**：链路层的数据单位。

## 通信类型

- **单播**：一对一的通信方式，如传统固定电话。
- **广播**：一对多的通信方式，信息从一个主机发送到所有连接的端系统，如广播体操。
- **多播**：特定的一对多通信，信息仅发送给预定义的一组接收者。
- **任播**：在多个目标中选择一个最优的接收者进行单播通信。

## 序列化和反序列化

在基于 TCP 协议的数据通信中，消息的构成分为两个主要部分：消息头 (Header) 和消息体 (Body)。

**消息头 (Header)**的作用是携带关键信息，其中最关键的信息是消息体的长度。这个长度信息对于接收方正确、完整地接收和解析消息至关重要。

**消息体 (Body)**则承载了我们需要传输的实际内容。不过，无论是文本还是数字，最终都需要转化为计算机能理解的二进制形式——即 01 序列。文本通过编码转换成二进制串，而数字则可以直接转换为二进制形式。但当我们需要传输更复杂的数据结构，如结构体时，就需要采用特定的技术将它们序列化为二进制串。目前，有多种技术可以实现这一点，包括但不限于 JSON 和 Protobuf。

![数据序列化过程示意图](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/me/20240417070248.png)

**序列化**是指将结构体等复杂数据类型转换成二进制数组的过程，而**反序列化**则是将这些二进制数组恢复成原始结构体的过程。这一转换和恢复过程是 TCP 数据传输中不可或缺的一环，确保了数据的完整性和准确性。

## user agent

用户代理 (User Agent) 是任何能够代表用户行为的工具。虽然我们通常将其与网页浏览器等同，但用户代理的范围远不止于此。它们可以是搜索引擎用于爬取网页以构建和更新索引的机器人，也可以是工程师和 Web 开发人员在调试应用时使用的特定程序。简而言之，用户代理在互联网上扮演着多种角色，从浏览器到自动化脚本，都是在以用户的名义执行任务。

## 代理技术概述

### 正向代理

当我们使用翻墙 (FQ) 软件访问诸如 Facebook 这样的国外网站时，实际上是利用了正向代理的技术。在这种情况下，我们的请求首先发送给一个可以访问国际互联网的代理服务器。然后，这个代理服务器代替我们去访问目标网站，并将获取的数据回传给我们。

![正向代理示意图](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/computer/proxy-2.jpg)

正向代理的核心特点是，客户端明确知道目标服务器的地址；而目标服务器只知道请求来自某个代理服务器，并不了解请求的具体来源客户端。换言之，**正向代理隐藏了客户端的真实信息**。

要使用正向代理，客户端需要配置代理服务器的 IP 地址和端口。

总结：正向代理作为客户端和原始服务器之间的中介，客户端通过它请求内容，而原始服务器则认为这些请求都来自该代理。

### 反向代理

相对于正向代理，反向代理的处理方式有所不同。以我国的某宝网站为例，为了应对庞大的访问量，单一服务器已无法满足需求，因此采用了分布式部署策略。某宝通过使用 Nginx 作为反向代理服务器，实现了分布式集群的功能。

![反向代理示意图](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/computer/proxy-3.jpg)

在这种模式下，客户端的请求直接发送到代理服务器 (如 Nginx)，由它决定将请求转发给后端的哪一台服务器处理。对客户端而言，代理的存在是透明的，即客户端不需要进行任何特殊配置即可访问服务。

反向代理的主要作用包括：

- 通过作为公网访问入口来保护内网安全，实际的 Web 服务器位于内网中。
- 实现负载均衡，通过代理服务器分配请求到后端的多台服务器，优化网站的负载情况。

在实践中，正向代理和反向代理可以同时存在于一个应用场景中。正向代理负责代理客户端的请求访问目标服务器，而目标服务器可能是一个反向代理服务器，后者再将请求分配给多台实际处理业务的服务器。

![正向代理与反向代理结合示意图](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/computer/proxy-4.jpg)

通过这种方式，可以有效地管理网络请求，同时保护用户和服务器的隐私与安全。

## 私网和公网

### 私网 (内网/局域网)

私网，亦称为内网或局域网，是由企业或家庭用户搭建的专属网络环境。例如，一家公司内部连接的众多计算机就构成了一个私网或子网。这些网络内的设备可以自由地相互通信，而且使用的是**私有 IP 地址**。值得注意的是，**不同子网内部的私有地址可以是相同的**，因为它们仅在各自的网络内部需要识别。

### 公网 (互联网)

公网，或广义上的互联网，是一个全球性的网络，连接着世界各地的计算机和设备。在公网上，每个设备的 IP 地址都是**全球唯一的**，以确保网络中的任何设备都能找到并与之通信。

### 私网与公网之间的桥梁：NAT (Network Address Translation，网络地址转换)

私网中的设备若要访问公网 (如浏览 Google)，它们的私有 IP 地址必须转换为可在公网上识别的 IP 地址。这一转换过程称为 NAT。NAT 不仅实现了地址的转换，还通过端口映射等技术，有效地节省了公网 IP 资源，解决了私网设备访问公网的需求。

![](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/computer/v2-acf52b5dba31ed073be16388cc9c57fc_1440w.jpg)

### 端口映射：私网与公网通信的关键

当私网设备通过 NAT 访问公网时，如何确保公网的响应能准确回到发起请求的私网设备呢？这就需要端口映射技术来实现私网 IP 与公网 IP 之间的映射关系。通过端口映射，NAT 设备能够记录出站请求的源端口和目标端口，确保响应能够正确地路由回请求的源头。

![](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/computer/v2-c5cfd29db16110f0cd9d7f148be6b5e7_1440w.jpg)

简而言之，NAT 和端口映射共同构成了私网与公网之间的桥梁，使得内部网络的设备能够安全、高效地访问外部世界，同时也保护了私网的安全和公网 IP 资源的高效利用。

## 元数据

**元数据 (Metadata) 是关于数据的数据**。它提供了有关数据信息的详细描述，使用户能够理解和管理这些数据。元数据可以包括各种属性，如数据的创建者、创建时间、目的、位置、结构、特征等。通过这些信息，元数据帮助用户发现、使用和维护数据资源。

元数据在不同的领域和应用中扮演着重要的角色，具体包括但不限于：

### 在计算机文件系统中

**文件的元数据包括文件大小、创建日期、最后修改日期等信息**。这些信息帮助操作系统管理文件系统，并使用户能够搜索和组织文件。

### 在网络传输和通信中

**如 HTTP 协议中的头部信息，它包含了关于请求或响应的元数据**，例如内容类型 (`Content-Type`)、内容长度 (`Content-Length`)、服务器类型 (`Server`) 等。

### 在数据库管理中

数据库的元数据描述了数据库的结构，如表格名称、列名称、数据类型、约束等。这些信息对于数据库的设计、管理和使用至关重要。

### 在数字图书馆和档案中

元数据用于描述文档、图片、视频等资源的内容、作者、出版日期、主题等信息，以便用户能够搜索和访问这些资源。

### 在 Web 语义和资源描述中

如 RDF (Resource Description Framework) 和其他 Web 语义技术使用元数据来描述网络资源之间的关系，使得这些资源可以被机器理解和处理。

### 在多媒体和数字版权管理中

多媒体文件 (如音乐、视频) 的元数据包括艺术家、标题、发行年份、版权信息等，有助于内容的组织、发现和版权保护。

总的来说，元数据使数据更加有用和易于管理，它为数据的检索、使用和维护提供了必要的上下文信息。

## 子网掩码

> [IPv4 地址和子网掩码](https://www.bilibili.com/video/BV1xu411f7UW)

## CDN (内容分发网络)

**内容分发网络 (CDN)** 是一种技术，它通过将内容缓存到离用户最近的服务器上，来减少网站加载时间，提高用户体验。这种方法不仅减轻了主服务器的压力，还显著提升了访问速度和效率，特别适用于图片、视频、大文件下载及网站全站加速等多种场景。

简而言之，CDN 是一个精心设计的系统，涵盖了**分布式存储**、**负载均衡**、**请求重定向**以及**内容管理**四个核心组成部分，其中内容管理和全局流量管理构成了 CDN 的心脏。

**工作原理简述：**

![20240417232521](https://raw.githubusercontent.com/chuenwei0129/my-picgo-repo/master/me/20240417232521.png)

1. 当终端用户 (广州) 向 `www.taobao.com` 下的某资源发起请求时，首先向 LDNS (本地 DNS) 发起域名解析请求。
2. LDNS 检查缓存中是否有 `www.taobao.com` 的 IP 地址记录。如果有，则直接返回给终端用户；如果没有，则向授权 DNS 查询。
3. 当授权 DNS 解析 `www.taobao.com` 时，返回域名 CNAME `www.taobao.alicdn.com` 对应 IP 地址。
4. 域名解析请求发送至 DNS 调度系统，并为请求分配最佳节点 IP 地址。
5. LDNS 获取 DNS 返回的解析 IP 地址。
6. 用户获取解析 IP 地址。
7. 用户向获取的 IP 地址发起对该资源的访问请求。
   - 如果该 IP 地址对应的节点已缓存该资源，则会将数据直接返回给用户，例如，图中步骤 7 和 8，请求结束。
   - 如果该 IP 地址对应的节点未缓存该资源，则节点向它的上级缓存服务器请求内容，直至追溯到网站的源站发起对该资源的请求。获取资源后，结合用户自定义配置的缓存策略，将资源缓存至节点，例如，途中的杭州节点，并返回给用户，请求结束。

> Local DNS 通常是你的运营商提供的 DNS，一般域名解析的第一站会到这里回源 HOST 是指 CDN 节点在回源过程中，在源站访问的站点域名。

在步骤四中，DNS 调度系统可以实现负载均衡功能，负载均衡分为全局负载均衡和区域负载均衡，其内部逻辑大致如下：

1. CDN 全局负载均衡设备会根据用户 IP 地址，以及用户请求的内容 URL，选择一台用户所属区域的**区域负载均衡设备**，告诉用户向这台设备发起请求。
2. 区域负载均衡设备会为用户选择一台合适的**缓存服务器**提供服务，选择的依据包括：
   - 根据用户 IP 地址，判断哪一台服务器距用户最近；
   - 用户所处的运营商；
   - 根据用户所请求的 URL 中携带的内容名称，判断哪一台服务器上有用户所需内容；
   - 查询各个服务器当前的负载情况，判断哪一台服务器尚有服务能力。基于以上这些条件的综合分析之后，区域负载均衡设备会向全局负载均衡设备返回一台缓存服务器的 IP 地址。
3. 全局负载均衡设备把服务器的 IP 地址返回给用户。
